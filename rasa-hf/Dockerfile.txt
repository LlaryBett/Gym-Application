FROM rasa/rasa:3.6.1

USER root

# Copy all Rasa files
COPY . /app
WORKDIR /app

# Ensure models are present
RUN if [ -d "models" ]; then echo "✅ Models found"; else echo "❌ No models directory"; fi

# Hugging Face Spaces require port 7860
EXPOSE 7860

# Start Rasa server with API enabled on port 7860
CMD ["run", "--enable-api", "--cors", "*", "--port", "7860", "--debug"]